(this["webpackJsonpchat-app"]=this["webpackJsonpchat-app"]||[]).push([[0],{43:function(e,t,n){},44:function(e,t,n){},78:function(e,t,n){"use strict";n.r(t);var c=n(1),o=n.n(c),s=n(37),a=n.n(s),r=(n(43),n(7)),i=(n(44),n(38)),u=n.n(i),j=n(21),h=n(12),m=n.n(h),l=n(20),b=n(0),f=function(e){var t=e.socket,n=e.name,o=e.room,s=e.history,a=e.setShowChat,i=Object(c.useState)([]),u=Object(r.a)(i,2),h=u[0],f=u[1],O=Object(c.useState)(""),d=Object(r.a)(O,2),p=d[0],v=d[1],x=Object(c.useRef)(),g=Object(c.useRef)();Object(c.useEffect)(Object(l.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(s);case 2:x.current.scrollIntoView({behavior:"smooth"}),g.current.focus();case 4:case"end":return e.stop()}}),e)}))),[s]),Object(c.useEffect)((function(){x.current.scrollIntoView({behavior:"smooth"})}),[s]),Object(c.useEffect)((function(){t.on("recieve-message",(function(e){f((function(t){return[].concat(Object(j.a)(t),[e])})),x.current.scrollIntoView({behavior:"smooth"})}))}),[t]);var w=function(){var e=Object(l.a)(m.a.mark((function e(){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===p){e.next=9;break}return c={name:n,room:o,message:p,timestamp:new Date(Date.now()).getHours()+":"+new Date(Date.now()).getMinutes()},f((function(e){return[].concat(Object(j.a)(e),[c])})),e.next=5,t.emit("send-message",c);case 5:v(""),x.current.scrollIntoView({behavior:"smooth"}),e.next=10;break;case 9:alert("enter message");case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"chat",children:[Object(b.jsxs)("div",{className:"room-name",children:["Hi ",n,", welcome to ",o]}),Object(b.jsxs)("div",{className:"chat-history",children:[h.map((function(e,t){return Object(b.jsxs)("div",{className:n===e.name?"me":"other",children:[Object(b.jsx)("h4",{className:"message",children:e.message}),Object(b.jsxs)("p",{className:"details",children:[n===e.name?"me":e.name," | ",e.timestamp]})]},t)})),Object(b.jsx)("div",{ref:x})]}),Object(b.jsxs)("div",{className:"chat-inputs",children:[Object(b.jsx)("input",{type:"text",value:p,placeholder:"".concat(n,", write a message"),onChange:function(e){v(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&w()},ref:g}),Object(b.jsx)("button",{onClick:w,children:"Send"}),Object(b.jsx)("button",{onClick:function(){t.disconnect(t),a(!1),window.location.reload()},children:"Logout"})]})]})},O=function(e){var t=e.socket,n=e.setShowChat,o=e.setChatHistory,s=e.setName,a=e.setRoom,r=e.room,i=e.name,u=Object(c.useRef)();Object(c.useEffect)((function(){u.current.focus()}),[]),Object(c.useEffect)((function(){t.on("get-history",(function(e){o(e),console.log(e)})),console.log("in effect")}),[t]);var j=function(){if(""!==i&&""!==r){var e={name:i,room:r};t.emit("join-chat-room",e),n(!0)}else alert("something missing!")};return Object(b.jsxs)("div",{children:[Object(b.jsx)("input",{type:"text",placeholder:"Enter your name",ref:u,onChange:function(e){s(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&j()}}),Object(b.jsx)("input",{type:"text",placeholder:"Enter room name to join",onChange:function(e){a(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&j()}}),Object(b.jsx)("button",{onClick:j,children:"Join Room"})]})},d=u.a.connect("https://simplestchatapp.herokuapp.com");var p=function(){var e=Object(c.useState)(""),t=Object(r.a)(e,2),n=t[0],o=t[1],s=Object(c.useState)(""),a=Object(r.a)(s,2),i=a[0],u=a[1],j=Object(c.useState)([]),h=Object(r.a)(j,2),m=h[0],l=h[1],p=Object(c.useState)(!1),v=Object(r.a)(p,2),x=v[0],g=v[1];return Object(b.jsxs)("div",{className:"main",children:[Object(b.jsx)("h1",{children:"Simplest Chat App"}),Object(b.jsx)("div",{children:x?Object(b.jsx)(f,{setShowChat:g,socket:d,name:n,room:i,history:m}):Object(b.jsx)(O,{socket:d,setShowChat:g,setChatHistory:l,setName:o,setRoom:u,name:n,room:i})})]})},v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,79)).then((function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,s=t.getLCP,a=t.getTTFB;n(e),c(e),o(e),s(e),a(e)}))};a.a.render(Object(b.jsx)(o.a.StrictMode,{children:Object(b.jsx)(p,{})}),document.getElementById("root")),v()}},[[78,1,2]]]);
//# sourceMappingURL=main.982d4483.chunk.js.map